machine:
  node:
    version: 4.1.0
dependencies:
  pre:
    - sudo apt-get update; sudo apt-get install makeself p7zip-full;
    - npm install -g istanbul
deployment:
  staging:
    branch: /(feature|fix|chore).*/
    commands:
      - cd java-network-test && mvn package
      - cp java-network-test/target/javanetworktest-1.0-SNAPSHOT-jar-with-dependencies.jar ./java-network-test.jar
      - node build.js
      - cp builds/*.exe $CIRCLE_ARTIFACTS
      - cp builds/*.sh $CIRCLE_ARTIFACTS
      - cp builds/*.tar.gz $CIRCLE_ARTIFACTS

  production:
    branch: master
    commands:
      - cd java-network-test && mvn package
      - cp java-network-test/target/javanetworktest-1.0-SNAPSHOT-jar-with-dependencies.jar ./java-network-test.jar
      - node build.js
      - cp builds/*.exe $CIRCLE_ARTIFACTS
      - cp builds/*.sh $CIRCLE_ARTIFACTS
      - cp builds/*.tar.gz $CIRCLE_ARTIFACTS

#Update version.json with a new version number
#node build
#Upload installer executables at install-versions.risevision.com
#Update .cfg files with the new version number
#Upload .cfg files
